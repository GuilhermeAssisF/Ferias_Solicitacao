var ConstraintType={MUST:1,SHOULD:2,MUST_NOT:3},parentOBJ={},WKDef=WKDefField="",WKVersDef=WKVersDefField="",WKNumProces=WKNumProcesField="",WKNumState=WKNumStateField="";parent&&parent.ECM&&parent.ECM.workflowView&&parent.ECM.workflowView.processDefinition&&(WKDef=WKDefField=parent.ECM.workflowView.processId,WKVersDef=WKVersDefField=parent.ECM.workflowView.version,WKNumProces=WKNumProcesField=parent.ECM.workflowView.processDefinition.processInstanceId,WKNumState=WKNumStateField=parent.ECM.workflowView.processDefinition.currentMovto),parentOBJ=void 0==window.opener?parent:window.opener.parent;function ajaxRequestDefault(){return{url:null,dataType:"json",cache:!1,processData:!1,contentType:"application/json; charset=UTF-8",type:"POST",success:function(){},failure:function(){}}}function isObject(a){return $.isArray(a)|$.isPlainObject(a)|$.isFunction(a)}fluigXMLRPC={},fluigXMLRPC.Request=function(a,b){var c=new ajaxRequestDefault;c.type=b,a.data&&isObject(a.data)&&(a.data=JSON.stringify(a.data));var d=$.extend(c,a);$.ajax(d)},fluigXMLRPC.Create=function(a){fluigXMLRPC.Request(a,"POST")},fluigXMLRPC.Read=function(a){fluigXMLRPC.Request(a,"GET")},fluigXMLRPC.warn=function(a){console.log("WARN "+a),fluigXMLRPC.debugging&&fluigXMLRPC.debug("fluigXMLRPC.warn: "+a)},fluigXMLRPC.ecmRestUrl=window.location.protocol+"//"+window.location.host+"/api/public/ecm/",fluigXMLRPC.datasetsUrl=fluigXMLRPC.ecmRestUrl+"dataset/datasets/",fluigXMLRPC.availableDatasetsUrl=fluigXMLRPC.ecmRestUrl+"dataset/availableDatasets/",fluigXMLRPC.error=function(a,b){parentOBJ&&parentOBJ.WCMAPI&&parentOBJ.WCMAPI.failHandler?parentOBJ.WCMAPI.failHandler(a):console.log(a,b),fluigXMLRPC.debugging&&fluigXMLRPC.debug("fluigXMLRPC.error: "+a)},fluigXMLRPC.initDebugMode=function(a){fluigXMLRPC.debugging=!0,fluigXMLRPC.debugField=a,fluigXMLRPC.debug("debug initiate")},fluigXMLRPC.debug=function(a){if(fluigXMLRPC.debugging){isObject(a)&&(a=JSON.stringify(a));var b=document.getElementById(fluigXMLRPC.debugField);b.innerHTML=b.innerHTML+a+"<br>\n"}};var simpleAjaxAPI={};!window.jQuery||/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&10>RegExp.$1&&parent!=void 0&&parent.ECM===void 0?simpleAjaxAPI=function(){function a(c,d){var e=new XMLHttpRequest;e.open(c,d.url,d.async),e.setRequestHeader("Content-type","application/json; charset=UTF-8"),e.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.onreadystatechange=function(){if(4==e.readyState){var f=JSON.parse(e.responseText);200==e.status?d.success(f):d.error?d.error():parentOBJ.WCMAPI.failHandler(e)}},"POST"==c?e.send(JSON.stringify(d.data)):e.send()}return{Create:function(c){a("POST",c)},Read:function(c){a("GET",c)}}}():(simpleAjaxAPI.Create=fluigXMLRPC.Create,simpleAjaxAPI.Read=fluigXMLRPC.Read);var DatasetFactory={getDataset:function(a,b,c,d,e){var f={name:a,fields:b,constraints:c,order:d};fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getDataset "+fluigXMLRPC.datasetsUrl),fluigXMLRPC.debug(f),fluigXMLRPC.debug("callback? "+(void 0!=e)));var g;return simpleAjaxAPI.Create({url:fluigXMLRPC.datasetsUrl,data:f,async:void 0!=e,success:function(h){fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getDataset success"),fluigXMLRPC.debug(h)),e?e.success(h.content):g=h.content},error:function(h,i,j){fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getDataset error"),fluigXMLRPC.debug(h),fluigXMLRPC.debug(i),fluigXMLRPC.debug(j)),e?e.error(h,i,j):fluigXMLRPC.error(i,j)}}),g},createConstraint:function(a,b,c,d,e){return new SearchConstraint(a,b,c,d,e)}};function SearchConstraint(a,b,c,d,e){this._field=a,this._initialValue=null==b?"___NULL___VALUE___":b,this._finalValue=null==c?"___NULL___VALUE___":c,this._type=d,this._likeSearch=e,fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#SearchConstraint created"),fluigXMLRPC.debug(this))}DatasetFactory.getAvailableDatasets=function(a){fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getAvailableDatasets "+fluigXMLRPC.availableDatasetsUrl),fluigXMLRPC.debug("callback? "+(void 0!=a)));var b;return simpleAjaxAPI.Read({url:fluigXMLRPC.availableDatasetsUrl,async:void 0!=a,success:function(c){fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getAvailableDatasets success"),fluigXMLRPC.debug(c)),a?a.success(c.content):b=c.content},error:function(c,d,e){fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getAvailableDatasets error"),fluigXMLRPC.debug(c),fluigXMLRPC.debug(d),fluigXMLRPC.debug(e)),a?a.error(c,d,e):fluigXMLRPC.error(d,e)}}),b},DatasetFactory.getDatasetValues=function(a,b,c){null==b?b={}:"object"!=typeof b&&fluigXMLRPC.warn("Filtro Invalido.");var d={datasetId:a,filter:b};if("number"==typeof a)var e=fluigXMLRPC.ecmRestUrl+"dataset/cardDatasetValues/";else var e=fluigXMLRPC.ecmRestUrl+"dataset/standardDatasetValues/";fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getDatasetValues "+e),fluigXMLRPC.debug(d),fluigXMLRPC.debug("callback? "+(void 0!=c)));var f;return simpleAjaxAPI.Create({url:e,data:d,async:void 0!=c,success:function(g){fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getDatasetValues success"),fluigXMLRPC.debug(g)),c?c.success(g.content):f=g.content},error:function(g,h,i){fluigXMLRPC.debugging&&(fluigXMLRPC.debug("#DatasetFactory.getDatasetValues error"),fluigXMLRPC.debug(g),fluigXMLRPC.debug(h),fluigXMLRPC.debug(i)),c?c.error(g,h,i):fluigXMLRPC.error(h,i)}}),f};function getDatasetValues(a,b){return DatasetFactory.getDatasetValues(a,b)}function setDatasetParams(){$().prop()}